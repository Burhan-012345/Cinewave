<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Movie Download is Ready - CineWave</title>
    <style>
    /* Black & Blue Theme */
    :root {
        --primary-blue: #3b82f6;
        --secondary-blue: #1d4ed8;
        --accent-blue: #60a5fa;
        --dark-bg: #000000;
        --card-bg: #111827;
        --text-light: #f3f4f6;
        --text-muted: #9ca3af;
        --border-color: #374151;
        --success-color: #10b981;
        --warning-color: #f59e0b;
        --danger-color: #ef4444;
    }
    
    /* Reset styles */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background-color: var(--dark-bg);
        color: var(--text-light);
        line-height: 1.6;
        margin: 0;
        padding: 0;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    
    .email-container {
        max-width: 600px;
        margin: 0 auto;
        background-color: var(--dark-bg);
    }
    
    /* Header */
    .email-header {
        background: linear-gradient(135deg, var(--dark-bg) 0%, var(--secondary-blue) 100%);
        padding: 40px 20px;
        text-align: center;
        border-radius: 8px 8px 0 0;
        border-bottom: 3px solid var(--primary-blue);
    }
    
    .logo {
        color: var(--primary-blue);
        font-size: 32px;
        font-weight: 700;
        margin-bottom: 10px;
        display: inline-block;
        text-decoration: none;
    }
    
    .logo-icon {
        color: var(--primary-blue);
        margin-right: 10px;
    }
    
    .header-title {
        font-size: 24px;
        font-weight: 600;
        color: var(--text-light);
        margin-bottom: 10px;
    }
    
    .header-subtitle {
        color: var(--text-muted);
        font-size: 16px;
        margin-bottom: 0;
    }
    
    /* Content */
    .email-content {
        background-color: var(--card-bg);
        padding: 40px;
        border-radius: 0 0 8px 8px;
        border: 1px solid var(--border-color);
    }
    
    /* Movie Info Card */
    .movie-card {
        background-color: #1f2937;
        border-radius: 12px;
        padding: 25px;
        margin: 30px 0;
        border-left: 4px solid var(--primary-blue);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        border: 1px solid var(--border-color);
    }
    
    .movie-header {
        display: flex;
        align-items: flex-start;
        margin-bottom: 20px;
    }
    
    .movie-poster {
        width: 100px;
        height: 150px;
        border-radius: 8px;
        overflow: hidden;
        margin-right: 20px;
        flex-shrink: 0;
        background-color: #374151;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid var(--border-color);
    }
    
    .movie-poster-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .movie-poster-placeholder {
        color: var(--primary-blue);
        font-size: 36px;
    }
    
    .movie-info {
        flex: 1;
    }
    
    .movie-title {
        font-size: 20px;
        font-weight: 600;
        color: var(--text-light);
        margin-bottom: 8px;
        line-height: 1.3;
    }
    
    .movie-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 15px;
    }
    
    .meta-badge {
        background-color: rgba(59, 130, 246, 0.15);
        color: var(--accent-blue);
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
        border: 1px solid rgba(59, 130, 246, 0.3);
    }
    
    .movie-description {
        color: var(--text-muted);
        font-size: 14px;
        line-height: 1.6;
    }
    
    /* Download Section */
    .download-section {
        text-align: center;
        margin: 40px 0;
    }
    
    .download-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--text-light);
        margin-bottom: 20px;
    }
    
    .download-button {
        display: inline-block;
        background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%);
        color: white;
        text-decoration: none;
        padding: 16px 40px;
        border-radius: 8px;
        font-weight: 600;
        font-size: 16px;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
    }
    
    .download-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.6);
        background: linear-gradient(135deg, var(--secondary-blue) 0%, #1e40af 100%);
    }
    
    .download-icon {
        margin-right: 10px;
    }
    
    .download-info {
        margin-top: 20px;
        color: var(--text-muted);
        font-size: 14px;
    }
    
    /* Download Details */
    .details-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 30px 0;
    }
    
    .detail-card {
        background-color: rgba(31, 41, 55, 0.7);
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        border: 1px solid var(--border-color);
    }
    
    .detail-icon {
        color: var(--primary-blue);
        font-size: 24px;
        margin-bottom: 10px;
    }
    
    .detail-value {
        font-size: 18px;
        font-weight: 600;
        color: var(--text-light);
        margin-bottom: 5px;
    }
    
    .detail-label {
        color: var(--text-muted);
        font-size: 13px;
    }
    
    /* Instructions */
    .instructions {
        background-color: rgba(59, 130, 246, 0.1);
        border-radius: 8px;
        padding: 25px;
        margin: 30px 0;
        border-left: 4px solid var(--primary-blue);
        border: 1px solid rgba(59, 130, 246, 0.2);
    }
    
    .instructions-title {
        font-size: 16px;
        font-weight: 600;
        color: var(--primary-blue);
        margin-bottom: 15px;
        display: flex;
        align-items: center;
    }
    
    .instructions-icon {
        margin-right: 10px;
    }
    
    .instructions-list {
        list-style: none;
        padding: 0;
    }
    
    .instructions-list li {
        margin-bottom: 12px;
        padding-left: 24px;
        position: relative;
        color: var(--accent-blue);
        font-size: 14px;
        line-height: 1.5;
    }
    
    .instructions-list li:before {
        content: "âœ“";
        position: absolute;
        left: 0;
        color: var(--primary-blue);
        font-weight: bold;
    }
    
    /* Alternative Link */
    .alt-link-section {
        background-color: rgba(59, 130, 246, 0.08);
        border-radius: 8px;
        padding: 20px;
        margin: 30px 0;
        border-left: 4px solid var(--accent-blue);
        border: 1px solid rgba(59, 130, 246, 0.15);
    }
    
    .alt-link-title {
        font-size: 14px;
        font-weight: 600;
        color: var(--accent-blue);
        margin-bottom: 10px;
    }
    
    .alt-link {
        color: var(--accent-blue);
        font-size: 13px;
        word-break: break-all;
        background-color: rgba(59, 130, 246, 0.1);
        padding: 12px;
        border-radius: 6px;
        margin: 10px 0;
        display: block;
        text-decoration: none;
        border: 1px solid rgba(59, 130, 246, 0.2);
    }
    
    .alt-link:hover {
        background-color: rgba(59, 130, 246, 0.15);
    }
    
    /* Security Notice */
    .security-notice {
        background-color: rgba(239, 68, 68, 0.08);
        border-radius: 8px;
        padding: 20px;
        margin: 30px 0;
        border-left: 4px solid var(--danger-color);
        border: 1px solid rgba(239, 68, 68, 0.15);
    }
    
    .security-title {
        font-size: 14px;
        font-weight: 600;
        color: var(--danger-color);
        margin-bottom: 10px;
        display: flex;
        align-items: center;
    }
    
    .security-icon {
        margin-right: 10px;
    }
    
    .security-text {
        color: var(--text-muted);
        font-size: 13px;
        line-height: 1.6;
    }
    
    /* Footer */
    .email-footer {
        text-align: center;
        margin-top: 40px;
        padding-top: 30px;
        border-top: 1px solid var(--border-color);
        color: var(--text-muted);
        font-size: 14px;
    }
    
    .footer-links {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 20px 0;
        flex-wrap: wrap;
    }
    
    .footer-link {
        color: var(--primary-blue);
        text-decoration: none;
        font-size: 13px;
        transition: color 0.2s;
    }
    
    .footer-link:hover {
        color: var(--accent-blue);
        text-decoration: underline;
    }
    
    .footer-contact {
        margin: 20px 0;
        font-size: 13px;
    }
    
    .contact-link {
        color: var(--primary-blue);
        text-decoration: none;
    }
    
    .contact-link:hover {
        text-decoration: underline;
    }
    
    .copyright {
        font-size: 12px;
        color: var(--text-muted);
        margin-top: 20px;
    }
    
    /* Responsive */
    @media (max-width: 600px) {
        .email-content {
            padding: 25px;
        }
        
        .movie-header {
            flex-direction: column;
            text-align: center;
        }
        
        .movie-poster {
            margin: 0 auto 20px;
        }
        
        .download-button {
            padding: 14px 30px;
            width: 100%;
        }
        
        .details-grid {
            grid-template-columns: 1fr;
        }
        
        .footer-links {
            flex-direction: column;
            gap: 10px;
        }
    }
    
    /* Print styles */
    @media print {
        body {
            background: white !important;
            color: black !important;
        }
        
        .email-container {
            max-width: 100%;
            background: white !important;
        }
        
        .email-header, .email-content {
            background: white !important;
            color: black !important;
            border: 1px solid #ddd;
        }
        
        .download-button {
            background: #333 !important;
            color: white !important;
            border: 1px solid #333;
        }
        
        .alt-link {
            background: #f5f5f5 !important;
            color: #333 !important;
            border: 1px solid #ddd;
        }
    }
</style>
</head>
<body>
    <div class="email-container">
        <!-- Header -->
        <div class="email-header">
            <div class="logo">
                <span class="logo-icon">ðŸŽ¬</span>
                CineWave
            </div>
            <h1 class="header-title">Your Download is Ready!</h1>
            <p class="header-subtitle">Enjoy your movie offline anytime, anywhere</p>
        </div>
        
        <!-- Content -->
        <div class="email-content">
            <!-- Greeting -->
            <p style="margin-bottom: 25px; color: #e6f1ff;">
                Hi {{ user_name if user_name else 'Movie Lover' }},
            </p>
            <p style="margin-bottom: 30px; color: #a8b2d1; font-size: 15px;">
                Thank you for choosing CineWave! Your requested movie is now ready for download. 
                Click the button below to start downloading immediately.
            </p>
            
            <!-- Movie Info Card -->
            <div class="movie-card">
                <div class="movie-header">
                    <div class="movie-poster">
                        {% if movie_poster %}
                        <img src="{{ movie_poster }}" alt="{{ movie_title }}" class="movie-poster-img" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\"movie-poster-placeholder\">ðŸŽ¬</div>';">
                        {% else %}
                        <div class="movie-poster-placeholder">ðŸŽ¬</div>
                        {% endif %}
                    </div>
                    <div class="movie-info">
                        <h2 class="movie-title">{{ movie_title }}</h2>
                        <div class="movie-meta">
                            {% if release_year %}
                            <span class="meta-badge">{{ release_year }}</span>
                            {% endif %}
                            {% if duration %}
                            <span class="meta-badge">{{ duration }} min</span>
                            {% endif %}
                            {% if quality %}
                            <span class="meta-badge">{{ quality }}</span>
                            {% endif %}
                            {% if file_size %}
                            <span class="meta-badge">{{ file_size }}</span>
                            {% endif %}
                        </div>
                        {% if movie_description %}
                        <p class="movie-description">{{ movie_description|truncate(200) }}</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- Download Button -->
            <div class="download-section">
                <h3 class="download-title">Ready to Download</h3>
                <a href="{{ download_url }}" class="download-button">
                    <i class="fas fa-download download-icon"></i> Download Movie Now
                </a>
                <p class="download-info">
                    <i class="fas fa-clock" style="margin-right: 5px;"></i>
                    Link valid for 24 hours â€¢ Maximum 3 downloads allowed
                </p>
            </div>
            
            <!-- Download Details -->
            <div class="details-grid">
                <div class="detail-card">
                    <div class="detail-icon">
                        <i class="fas fa-hdd"></i>
                    </div>
                    <div class="detail-value">{{ file_size if file_size else '--' }}</div>
                    <div class="detail-label">File Size</div>
                </div>
                
                <div class="detail-card">
                    <div class="detail-icon">
                        <i class="fas fa-file-video"></i>
                    </div>
                    <div class="detail-value">{{ format if format else 'MP4' }}</div>
                    <div class="detail-label">Format</div>
                </div>
                
                <div class="detail-card">
                    <div class="detail-icon">
                        <i class="fas fa-download"></i>
                    </div>
                    <div class="detail-value">{{ download_count if download_count else '1st' }}</div>
                    <div class="detail-label">Download Count</div>
                </div>
                
                <div class="detail-card">
                    <div class="detail-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="detail-value">{{ expiry_days if expiry_days else '30' }} days</div>
                    <div class="detail-label">Available For</div>
                </div>
            </div>
            
            <!-- Download Instructions -->
            <div class="instructions">
                <h4 class="instructions-title">
                    <i class="fas fa-lightbulb instructions-icon"></i>
                    Download Instructions
                </h4>
                <ul class="instructions-list">
                    <li>Click the download button above to start downloading immediately</li>
                    <li>Ensure you have a stable internet connection for faster download</li>
                    <li>Save the file to a location you can easily find later</li>
                    <li>For best experience, use the CineWave mobile app to watch offline</li>
                    <li>You can download this movie up to 3 times within 30 days</li>
                </ul>
            </div>
            
            <!-- Alternative Download Link -->
            <div class="alt-link-section">
                <h4 class="alt-link-title">
                    <i class="fas fa-link" style="margin-right: 8px;"></i>
                    Alternative Download Link
                </h4>
                <p style="color: #a8b2d1; font-size: 13px; margin-bottom: 10px;">
                    If the button above doesn't work, copy and paste this link into your browser:
                </p>
                <a href="{{ download_url }}" class="alt-link">{{ download_url }}</a>
            </div>
            
            <!-- Security Notice -->
            <div class="security-notice">
                <h4 class="security-title">
                    <i class="fas fa-shield-alt security-icon"></i>
                    Security Notice
                </h4>
                <p class="security-text">
                    This download link is uniquely generated for your account and should not be shared with others. 
                    Unauthorized sharing of download links may result in account suspension. 
                    All downloads are protected by DRM and intended for personal use only.
                </p>
            </div>
            
            <!-- Closing -->
            <p style="margin-top: 40px; color: #a8b2d1; font-size: 15px; line-height: 1.7;">
                If you have any issues with your download or need assistance, 
                please don't hesitate to contact our support team.
            </p>
            <p style="margin: 25px 0; color: #e6f1ff; font-size: 15px;">
                Happy watching! ðŸŽ¬<br>
                <strong>The CineWave Team</strong>
            </p>
        </div>
        
        <!-- Footer -->
        <div class="email-footer">
            <div class="footer-links">
                <a href="{{ site_url }}/help" class="footer-link">Help Center</a>
                <a href="{{ site_url }}/contact" class="footer-link">Contact Support</a>
                <a href="{{ site_url }}/downloads" class="footer-link">My Downloads</a>
                <a href="{{ site_url }}" class="footer-link">Browse Movies</a>
            </div>
            
            <div class="footer-contact">
                <p style="margin-bottom: 5px;">
                    <i class="fas fa-envelope" style="margin-right: 8px;"></i>
                    <a href="mailto:support@cinewave.com" class="contact-link">support@cinewave.com</a>
                </p>
                <p>
                    <i class="fas fa-phone" style="margin-right: 8px;"></i>
                    +1 (555) 123-4567
                </p>
            </div>
            
            <div class="copyright">
                <p style="margin-bottom: 5px;">
                    &copy; 2024 CineWave. All rights reserved.
                </p>
                <p style="font-size: 11px; color: #8892b0;">
                    This email was sent to {{ user_email }} because you downloaded a movie from CineWave.<br>
                    Please do not reply to this automated message.
                </p>
                <p style="margin-top: 15px; font-size: 11px; color: #8892b0;">
                    CineWave HQ â€¢ 123 Movie Street â€¢ Hollywood, CA 90210 â€¢ United States
                </p>
            </div>
        </div>
    </div>
    
    <!-- Fallback for email clients that don't support CSS -->
    <!--[if mso]>
    <style>
        .email-container {
            width: 600px !important;
        }
        .download-button {
            background: #64ffda !important;
            color: #0a192f !important;
        }
    </style>
    <![endif]-->
</body>
</html>